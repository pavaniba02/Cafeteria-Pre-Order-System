<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amity University Cafeteria</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #f39c12;
            --accent-color: #e67e22;
            --light-bg: #f8f9fa;
            --dark-text: #2c3e50;
            --light-text: #ecf0f1;
            --card-bg: #ffffff;
            --shadow-light: rgba(0, 0, 0, 0.08);
            --shadow-medium: rgba(0, 0, 0, 0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light-bg);
            min-height: 100vh;
            color: var(--dark-text);
            line-height: 1.6;
        }

        header {
            background: var(--primary-color);
            padding: 2rem;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            align-items: center;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            justify-content: space-between;
            padding: 0 2rem;
            position: relative;
        }

        .amity-logo {
            height: 140px;
            width: 140px;
            margin-right: 0;
            margin-left: 0;
            object-fit: cover;
            border: none;
            padding: 0;
            background: none;
            box-shadow: none;
            filter: none;
            mix-blend-mode: normal;
            opacity: 1;
            position: relative;
            z-index: 2;
        }

        .header-titles {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
            text-align: center;
            width: 100%;
            margin: 0 auto;
        }

        .uni-title {
            color: var(--light-text);
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
            font-family: 'Poppins', sans-serif;
            letter-spacing: 1.5px;
        }

        .system-title {
            color: #bdc3c7;
            font-size: 1.3rem;
            font-weight: 400;
            margin-bottom: 0;
        }

        /* Firebase Authentication styles */
        .firebase-auth-section {
            margin: 20px auto;
            padding: 20px;
            border-radius: 8px;
            background: #f8f9fa;
            max-width: 400px;
            display: none;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .verification-status {
            margin: 10px 0;
            text-align: center;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            position: relative;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .close {
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 1.8rem;
            color: #666;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close:hover {
            color: var(--primary-color);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--dark-text);
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        .submit-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            background-color: var(--accent-color);
            transform: translateY(-2px);
        }

        /* Notification styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background-color: #2ecc71;
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }

        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }

        .notification.error {
            background-color: #e74c3c;
        }

        /* Main Content */
        main {
            padding: 2.5rem 1rem;
            max-width: 1100px;
            margin: 0 auto;
            position: relative;
        }

        .welcome-section {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 20px var(--shadow-light);
            position: relative;
        }

        .welcome-section h2 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            font-size: 2rem;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }

        .welcome-description {
            font-size: 1.1rem;
            color: #6c757d;
            max-width: 700px;
            margin: 0 auto;
            margin-bottom: 1.5rem;
        }

        .login-buttons {
            display: flex;
            justify-content: center;
            gap: 1.2rem;
            margin-top: 2rem;
        }

        .login-btn {
            padding: 12px 35px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            color: white;
        }

        .student-btn {
            background-color: var(--secondary-color);
        }

        .admin-btn {
            background-color: var(--primary-color);
        }

        .login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .student-btn:hover {
            background-color: var(--accent-color);
        }

        .admin-btn:hover {
            background-color: #34495e;
        }

        /* Menu Cards */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .menu-card {
            background: var(--card-bg);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 6px 25px var(--shadow-light);
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
            position: relative;
        }

        .menu-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 35px var(--shadow-medium);
        }

        .card-image {
            height: 200px;
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-icon {
            font-size: 4rem;
            color: white;
            opacity: 0.9;
        }

        .card-content {
            padding: 1.5rem;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0.8rem;
            font-family: 'Poppins', sans-serif;
        }

        .card-description {
            color: #6c757d;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .card-time {
            background: var(--light-bg);
            color: var(--secondary-color);
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            display: inline-block;
        }

        /* Footer */
        footer {
            background: var(--primary-color);
            color: var(--light-text);
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .social-links a {
            color: var(--light-text);
            font-size: 1.5rem;
            transition: color 0.3s;
        }

        .social-links a:hover {
            color: var(--secondary-color);
        }

        .footer-text {
            margin-bottom: 0.5rem;
        }

        /* About Modal Styles */
        .about-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .about-modal-content {
            background-color: #fefefe;
            margin: 3% auto;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
        }

        .about-modal-content h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-family: 'Poppins', sans-serif;
            text-align: center;
        }

        .about-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: #f8f9fa;
        }

        .about-section h3 {
            color: var(--secondary-color);
            margin-bottom: 1rem;
            font-family: 'Poppins', sans-serif;
        }

        .about-section p {
            color: #6c757d;
            line-height: 1.8;
            margin-bottom: 1rem;
        }

        /* About Cafeteria Button */
        .about-cafe-btn {
            background: #fff !important;
            color: var(--primary-color) !important;
            border: 2px solid #f7b731 !important;
            font-weight: 700;
            padding: 0.7rem 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            position: absolute;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
        }

        .about-cafe-btn:hover {
            background: #f7b731 !important;
            color: #2c3e50 !important;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                padding: 1rem;
            }
            
            .header-titles {
                position: static;
                transform: none;
                margin: 1rem 0;
            }
            
            .about-cafe-btn {
                position: static;
                transform: none;
                margin-top: 1rem;
            }
            
            .login-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .login-btn {
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <!-- Firebase Authentication UI -->
    <div id="firebaseAuthSection" class="firebase-auth-section">
        <h2 style="text-align:center; color:var(--primary-color); margin-bottom:1rem;">Email Verification Required</h2>
        <div class="form-group">
            <input id="emailVerification" type="email" placeholder="yourname@s.amity.edu" class="form-control">
        </div>
        <div class="form-group">
            <input id="passwordVerification" type="password" placeholder="Create a password" class="form-control">
        </div>
        <button onclick="registerAndSend()" class="submit-btn">Register & Verify Email</button>
        <p id="verificationStatus" class="verification-status"></p>
    </div>

    <div id="verifiedSection" style="display:none; text-align:center; padding:20px;">
        <p style="font-size:24px;color:green;text-align:center;">✅ Email Verified!</p>
        <button onclick="enterSite()" class="submit-btn" style="max-width:300px;">Continue to Cafeteria</button>
    </div>

    <header>
        <div class="header-content">
            <img src="logo.png" alt="Amity University Logo" class="amity-logo">
            <div class="header-titles">
                <h1 class="uni-title">Amity University</h1>
                <h2 class="system-title">Bangalore Campus Cafeteria</h2>
            </div>
            <button class="about-cafe-btn" id="aboutCafeBtnHeader">
                <i class="fas fa-info-circle"></i> About Cafeteria
            </button>
        </div>
    </header>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- Student Login Modal -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="document.getElementById('studentModal').style.display='none'">&times;</span>
            <h2 style="text-align: center; margin-bottom: 1.5rem; color: var(--primary-color);">Student Login</h2>
            <form id="studentForm">
                <div class="form-group">
                    <label for="studentName">Full Name</label>
                    <input type="text" id="studentName" required placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label for="studentPhone">Phone Number</label>
                    <input type="tel" id="studentPhone" required pattern="[0-9]{10}" maxlength="10" placeholder="Enter 10-digit number">
                </div>
                <div class="form-group">
                    <label for="studentEmail">Email <span style="color: #666; font-size: 0.9em;">(@s.amity.edu required)</span></label>
                    <input type="email" id="studentEmail" required 
                           pattern="[a-zA-Z0-9._%+-]+@s\.amity\.edu$"
                           placeholder="yourname@s.amity.edu">
                    <small style="color: #666; display: block; margin-top: 4px;">
                        <i class="fas fa-info-circle"></i> Must be a valid Amity student email ending with @s.amity.edu
                    </small>
                </div>
                <button type="submit" class="submit-btn">Login</button>
            </form>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="document.getElementById('adminModal').style.display='none'">&times;</span>
            <h2 style="text-align: center; margin-bottom: 1.5rem; color: var(--primary-color);">Admin Login</h2>
            <form id="adminForm">
                <div class="form-group">
                    <label for="adminName">Admin Name:</label>
                    <input type="text" id="adminName" required>
                </div>
                <div class="form-group">
                    <label for="adminId">Admin ID:</label>
                    <input type="text" id="adminId" required>
                </div>
                <div class="form-group">
                    <label for="adminPhone">Phone Number:</label>
                    <input type="tel" id="adminPhone" pattern="[0-9]{10}" title="Please enter a valid 10-digit number" required>
                </div>
                <button type="submit" class="submit-btn">Login</button>
            </form>
        </div>
    </div>

    <!-- About Cafeteria Modal -->
    <div id="aboutCafeModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeAboutCafeModal">&times;</span>
            <h2 style="text-align:center; color: var(--primary-color); margin-bottom: 1rem;">About Our Cafeteria</h2>
            <ul style="font-size:1.1rem; color:#333; line-height:1.7; list-style: disc inside;">
                <li><b>Fresh & Hygienic:</b> All meals are prepared daily with fresh, high-quality ingredients and strict hygiene standards.</li>
                <li><b>Multi-cuisine:</b> Enjoy North Indian, South Indian, and Continental dishes every day.</li>
                <li><b>Student Favorites:</b> Dishes like Paneer Butter Masala, Masala Dosa, and Veg Burger are campus legends!</li>
                <li><b>Healthy Options:</b> Salads, fresh juices, and low-oil recipes are always available.</li>
                <li><b>Fun Fact:</b> The cafeteria serves over 1,000 meals and 500 cups of chai daily!</li>
                <li><b>Special Days:</b> Don't miss the Friday "Chef's Special" and festival-themed menus.</li>
            </ul>
            <button class="submit-btn" id="closeAboutCafeBtn" style="width: 100%;">Close</button>
        </div>
    </div>

    <main>
        <div class="welcome-section">
            <h2>Welcome to Our Cafeteria</h2>
            <p class="welcome-description">Experience delicious, fresh meals prepared daily by our skilled kitchen team. From hearty breakfast options to satisfying lunch meals and quick snacks, we've got something for everyone in the Amity community.</p>
            <div class="login-buttons">
                <button class="login-btn student-btn" onclick="openStudentModal()">Student Login</button>
                <button class="login-btn admin-btn" onclick="openAdminModal()">Admin Login</button>
            </div>
        </div>
        
        <div class="menu-grid" style="display: none;">
            <a href="breakfast1.html" class="menu-card breakfast-card">
                <div class="card-image">
                    <i class="fas fa-coffee card-icon"></i>
                </div>
                <div class="card-content">
                    <h3 class="card-title">Breakfast</h3>
                    <p class="card-description">Start your day right with our fresh breakfast selections. Traditional Indian breakfast, continental options, and freshly brewed coffee to energize your morning.</p>
                    <span class="card-time">Available: 8:00 AM - 11:00 AM</span>
                </div>
            </a>

            <a href="Lunchnew1.html" class="menu-card lunch-card">
                <div class="card-image">
                    <i class="fas fa-utensils card-icon"></i>
                </div>
                <div class="card-content">
                    <h3 class="card-title">Lunch</h3>
                    <p class="card-description">Nutritious and filling lunch meals featuring a variety of cuisines. From traditional thali to international dishes, enjoy a proper meal during your break.</p>
                    <span class="card-time">Available: 12:00 PM - 3:00 PM</span>
                </div>
            </a>

            <a href="SnacksNew1.html" class="menu-card snacks-card">
                <div class="card-image">
                    <i class="fas fa-hamburger card-icon"></i>
                </div>
                <div class="card-content">
                    <h3 class="card-title">Snacks</h3>
                    <p class="card-description">Quick bites, street food, and sweet treats for every craving.<br>
                    Enjoy samosas, burgers, momos, and more, freshly made and always tasty.<br>
                    Perfect for a quick break or sharing with friends at any time of day.</p>
                    <span class="card-time">Available: All Day</span>
                </div>
            </a>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="social-links">
                <a href="https://www.instagram.com/amityunibengaluru_official?igsh=aXcyY28zcm40NGlt" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/share/16bdeuMTUK/" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                <a href="https://x.com/AmityBengaluru" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="https://youtube.com/@amityuniversity3146?feature=shared" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
            </div>
            <p class="footer-text">Amity University Bangalore Campus</p>
            <p class="footer-text">© 2025 Amity Cafeteria. All rights reserved.</p>
        </div>
    </footer>

    <!-- Firebase Scripts -->
    <script type="module">
        // Firebase configuration and initialization
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, sendEmailVerification, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC9DFfu8a-anENHh4spS5PbJCXoUC6MhQc",
            authDomain: "amity-cafeteria-ordering.firebaseapp.com",
            projectId: "amity-cafeteria-ordering",
            storageBucket: "amity-cafeteria-ordering.appspot.com",
            messagingSenderId: "695302163579",
            appId: "1:695302163579:web:f1e73ce5c8d290d6fe0110"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Authentication state observer
        onAuthStateChanged(auth, (user) => {
            if (user) {
                if (user.emailVerified) {
                    document.getElementById('firebaseAuthSection').style.display = 'none';
                    document.getElementById('verifiedSection').style.display = 'block';
                    localStorage.setItem('userEmail', user.email);
                }
            } else {
                // Don't show auth section automatically - only when student tries to login
                localStorage.removeItem('userEmail');
            }
        });

        // Register and send verification email
        window.registerAndSend = async function() {
            const email = document.getElementById('emailVerification').value;
            const password = document.getElementById('passwordVerification').value;
            const statusElement = document.getElementById('verificationStatus');

            if (!email.endsWith('@s.amity.edu')) {
                statusElement.textContent = 'Please use an @s.amity.edu email address';
                statusElement.style.color = 'red';
                return;
            }

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                await sendEmailVerification(userCredential.user);
                statusElement.textContent = 'Verification email sent! Please check your inbox.';
                statusElement.style.color = 'green';
            } catch (error) {
                if (error.code === 'auth/email-already-in-use') {
                    try {
                        await signInWithEmailAndPassword(auth, email, password);
                        if (!auth.currentUser.emailVerified) {
                            await sendEmailVerification(auth.currentUser);
                            statusElement.textContent = 'Verification email sent! Please check your inbox.';
                            statusElement.style.color = 'green';
                        }
                    } catch (signInError) {
                        statusElement.textContent = 'Error: Invalid credentials';
                        statusElement.style.color = 'red';
                    }
                } else {
                    statusElement.textContent = 'Error: ' + error.message;
                    statusElement.style.color = 'red';
                }
            }
        };

        // Enter site after verification
        window.enterSite = function() {
            // Get pending student data and save it permanently
            const pendingData = sessionStorage.getItem('pendingStudentData');
            if (pendingData) {
                const studentData = JSON.parse(pendingData);
                localStorage.setItem('studentData', JSON.stringify(studentData));
                sessionStorage.removeItem('pendingStudentData');
                
                // Hide verification sections
                document.getElementById('verifiedSection').style.display = "none";
                document.getElementById('firebaseAuthSection').style.display = "none";
                
                // Show menu and welcome user
                showMenuItems(studentData.name);
            } else {
                window.location.href = 'main.html';
            }
        };

        // Logout function
        window.logout = async function() {
            try {
                await signOut(auth);
                localStorage.removeItem('userEmail');
                localStorage.removeItem('studentData');
                localStorage.removeItem('adminData');
                window.location.href = 'index.html';
            } catch (error) {
                console.error('Error signing out:', error);
            }
        };
    </script>

    <script>
        // Get modals and forms
        const studentModal = document.getElementById('studentModal');
        const adminModal = document.getElementById('adminModal');
        const aboutCafeModal = document.getElementById('aboutCafeModal');
        const studentForm = document.getElementById('studentForm');
        const adminForm = document.getElementById('adminForm');
        
        // Get close buttons
        const studentCloseBtn = studentModal.querySelector('.close');
        const adminCloseBtn = adminModal.querySelector('.close');
        const closeAboutCafeBtn = document.getElementById('closeAboutCafeBtn');

        // Modal functions
        function openStudentModal() {
            studentModal.style.display = 'block';
        }

        function openAdminModal() {
            adminModal.style.display = 'block';
        }

        function openAboutCafeModal() {
            aboutCafeModal.style.display = 'block';
        }

        function closeAboutCafeModal() {
            aboutCafeModal.style.display = 'none';
        }

        function showNotification(message, isError = false) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification' + (isError ? ' error' : '');
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function capitalizeWords(str) {
            return str.replace(/\b\w/g, c => c.toUpperCase());
        }

        function showMenuItems(name) {
            document.querySelector('.welcome-description').style.display = 'none';
            document.querySelector('.login-buttons').style.display = 'none';
            document.querySelector('.menu-grid').style.display = 'grid';
            
            // Update welcome section
            const welcomeSection = document.querySelector('.welcome-section');
            welcomeSection.innerHTML = `
                <h2>Welcome, ${name}!</h2>
                <p>Please select from our menu options below</p>
                <button onclick="logout()" style="margin-top: 15px; padding: 10px 20px; background: #e74c3c; color: white; border: none; border-radius: 8px; cursor: pointer;">Logout</button>
            `;
            
            document.querySelector('.menu-grid').scrollIntoView({ behavior: 'smooth' });
            showNotification('Welcome ' + name + '! You can now access the menu.');
        }

        // Close modal events
        studentCloseBtn.onclick = () => studentModal.style.display = 'none';
        adminCloseBtn.onclick = () => adminModal.style.display = 'none';
        closeAboutCafeBtn.onclick = () => closeAboutCafeModal();

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target == studentModal) {
                studentModal.style.display = 'none';
            }
            if (event.target == adminModal) {
                adminModal.style.display = 'none';
            }
            if (event.target == aboutCafeModal) {
                aboutCafeModal.style.display = 'none';
            }
        }

        // Handle student form submission - ONLY TRIGGER EMAIL VERIFICATION HERE
        studentForm.onsubmit = function(e) {
            e.preventDefault();
            const name = document.getElementById('studentName').value;
            const phone = document.getElementById('studentPhone').value;
            const email = document.getElementById('studentEmail').value;

            // Validate student email domain
            if (!email.endsWith('@s.amity.edu')) {
                showNotification('Please use your Amity student email (@s.amity.edu)', true);
                return;
            }

            // Show email verification section for student emails
            document.getElementById('firebaseAuthSection').style.display = "block";
            document.getElementById('emailVerification').value = email;
            studentModal.style.display = 'none';
            
            // Store student data temporarily until email verification
            sessionStorage.setItem('pendingStudentData', JSON.stringify({
                name: name,
                phone: phone,
                email: email,
                type: 'student'
            }));

            showNotification('Please verify your email to continue');
        };

        // Handle admin form submission - NO EMAIL VERIFICATION
        adminForm.onsubmit = function(e) {
            e.preventDefault();
            const name = document.getElementById('adminName').value;
            const adminId = document.getElementById('adminId').value;
            const phone = document.getElementById('adminPhone').value;
            
            localStorage.setItem('adminData', JSON.stringify({
                name: name,
                adminId: adminId,
                phone: phone,
                type: 'admin'
            }));

            adminModal.style.display = 'none';
            showMenuItems(name);
        };

        // About cafeteria button event
        document.getElementById('aboutCafeBtnHeader').onclick = function() {
            openAboutCafeModal();
        };

        // Initialize on page load
        window.onload = function() {
            // Hide email verification on load - only show when student tries to login
            document.getElementById('firebaseAuthSection').style.display = "none";
            document.getElementById('verifiedSection').style.display = "none";
            
            // Check if user is already logged in
            const studentData = JSON.parse(localStorage.getItem('studentData'));
            const adminData = JSON.parse(localStorage.getItem('adminData'));
            
            if (studentData || adminData) {
                const userData = studentData || adminData;
                showMenuItems(userData.name);
            }
        };
    </script>
</body>
</html>
